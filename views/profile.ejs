<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css" />
    <link rel="stylesheet" href="/css/main.css">
    <script defer src="https://use.fontawesome.com/releases/v5.0.4/js/all.js"></script>
    <title>Fwitter - Profile</title>
  </head>
  <body class="site">

    <%- include('./partials/nav') %>

    <section class="container site-content">
      <div class="columns">

        <div class="column is-one-quarter is-offset-one-quarter the-padder">
          <div class="card">
            <header class="card-header">
              <p class="card-header-title">Profile</p>
            </header>
              <p class="subtitle"><i class="far fa-user"></i> Username -- <%= user.username %></p>

            <p class="subtitle"><i class="far fa-envelope"></i> Email -- <%= user.email %></p>

            <p class="subtitle"><i class="fas fa-users"></i> Followers -- <%= user.followers %></p>
            <p class="subtitle"><i class="fab fa-twitter" data-fa-transform="rotate-90"></i> Tweets -- <%= user.tweets %></p>
          </div>

        </div>

        <div class="column is-4 profile-options">
          <% if (viewer._id.toString() === user._id.toString()) { %>

              <a class="button is-link" href="/tweets">View Your Tweets <i class="fab fa-twitter" data-fa-transform="rotate-90"></i></a>
              &nbsp &nbsp
              <a class="button is-warning" href="/logout">Log out</a>


          <% } else if (user.following.toString().includes(viewer._id.toString())) { %>

              <p>You're already following this user</p>


          <% } else { %>

              <form class="form" action="/follow/<%= user._id %>" method="post">
                <button type="submit" class="button is-info"><i class="fas fa-user-plus"></i>Follow <%= user.username %></button>
              </form>

          <% } %>
        </div>
      </div>
    </section>

    <%- include('./partials/footer') %>

  </body>
</html>
